<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="danbaixi" />
    <title>懂导航 - 做懂你的导航</title>
    <meta name="keywords" content="网址导航,设计资源,UI设计,网址大全,设计师导航,优秀网站,网站推荐,站库">
    <meta name="description" content="懂导航 - 打造自媒体网站和工具发现平台">
    <link rel="shortcut icon" href="assets/images/favicon1.png">
    <link rel="stylesheet" href="assets/css/fonts/fontawesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/hero-section.css">
    <link rel="stylesheet" href="assets/css/xenon-core.css">
    <link rel="stylesheet" href="assets/css/xenon-components.css">
    <link rel="stylesheet" href="assets/css/bootstrap.css">
    <link rel="stylesheet" href="assets/css/nav.css">
    <link rel="stylesheet" href="assets/css/contact.css">
    <link rel="stylesheet" href="assets/css/font-update.css">
    <link rel="stylesheet" href="assets/css/search-component.css">
    <link rel="stylesheet" href="assets/css/announcement-feishu.css">
    <style>
        /* 公告系统动画效果 */
        @keyframes announcementSlideIn {
            0% {
                opacity: 0;
                transform: translateY(-20px) scale(0.95);
            }

            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        @keyframes backgroundShimmer {

            0%,
            100% {
                opacity: 0.3;
                transform: rotate(0deg);
            }

            50% {
                opacity: 0.6;
                transform: rotate(180deg);
            }
        }

        @keyframes announcementSlideOut {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }

            100% {
                opacity: 0;
                transform: translateY(-20px) scale(0.95);
            }
        }

        /* 公告容器显示状态 */
        .announcement-container.show {
            display: block !important;
        }

        /* 公告链接样式 - 飞书风格蓝色 */
        .announcement-text a {
            color: #366fff !important;
            text-decoration: none !important;
            font-weight: 500 !important;
            transition: all 0.2s ease !important;
            border-bottom: none !important;
        }

        .announcement-text a:hover {
            color: #2b5ce6 !important;
            text-decoration: none !important;
            transform: translateY(-1px) !important;
        }

        /* 背景浮动动画 */
        @keyframes backgroundFloat {

            0%,
            100% {
                transform: translateY(0px) rotate(0deg);
                opacity: 0.6;
            }

            33% {
                transform: translateY(-20px) rotate(120deg);
                opacity: 0.8;
            }

            66% {
                transform: translateY(10px) rotate(240deg);
                opacity: 0.7;
            }
        }

        /* 优化主容器背景 */
        .stats-container {
            background: transparent !important;
            backdrop-filter: none !important;
            -webkit-backdrop-filter: none !important;
            border: none !important;
            box-shadow: none !important;
            margin: 0 !important;
        }

        /* 优化网站卡片背景 */
        .xe-widget {
            background: rgba(255, 255, 255, 0.9) !important;
            backdrop-filter: blur(8px) !important;
            border: 1px solid rgba(255, 255, 255, 0.3) !important;
            transition: all 0.3s ease !important;
        }

        .xe-widget:hover {
            background: rgba(255, 255, 255, 0.95) !important;
            transform: translateY(-2px) !important;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15) !important;
        }

        /* 简洁分类标题样式 - 无图标加粗版 */
        .nav-item h4.text-gray {
            background: transparent !important;
            backdrop-filter: none !important;
            -webkit-backdrop-filter: none !important;
            border: none !important;
            border-radius: 0 !important;
            padding: 12px 0 8px 0 !important;
            margin: 20px 0 15px 0 !important;
            color: #333 !important;
            font-weight: 700 !important;
            font-size: 18px !important;
            letter-spacing: 0.5px !important;
            box-shadow: none !important;
            transition: all 0.2s ease !important;
            display: flex !important;
            align-items: center !important;
            justify-content: flex-start !important;
            position: relative !important;
            border-bottom: none !important;
            padding-bottom: 0 !important;
        }

        .nav-item h4.text-gray:hover {
            color: #222 !important;
            transform: none !important;
            box-shadow: none !important;
            background: transparent !important;
            border-bottom: none !important;
        }

        .nav-item h4.text-gray .nav-count {
            background: rgba(37, 99, 235, 0.1) !important;
            color: #2563eb !important;
            padding: 4px 12px !important;
            border-radius: 16px !important;
            font-size: 12px !important;
            font-weight: 600 !important;
            border: 1px solid rgba(37, 99, 235, 0.2) !important;
            margin-left: auto !important;
            min-width: 28px !important;
            text-align: center !important;
            box-shadow: none !important;
            text-shadow: none !important;
            transition: all 0.2s ease !important;
            height: auto !important;
            display: inline-flex !important;
            align-items: center !important;
            justify-content: center !important;
        }

        .nav-item h4.text-gray:hover .nav-count {
            background: rgba(37, 99, 235, 0.15) !important;
            border-color: rgba(37, 99, 235, 0.3) !important;
            transform: none !important;
            box-shadow: none !important;
        }

        /* 完全融入背景的按钮样式 */
        .top-function-button {
            padding: 10px 16px !important;
            border: none !important;
            background: transparent !important;
            border-radius: 0 !important;
            transition: all 0.2s ease !important;
            position: relative !important;
            font-weight: 600 !important;
            font-size: 14px !important;
            cursor: pointer !important;
            text-decoration: none !important;
            display: inline-flex !important;
            align-items: center !important;
            justify-content: center !important;
            letter-spacing: 0.5px !important;
            box-shadow: none !important;
            backdrop-filter: none !important;
            -webkit-backdrop-filter: none !important;
        }

        /* 联系按钮 - 完全透明 */
        .top-function-button.contact-style {
            color: #64748b !important;
            border: 2px solid transparent !important;
            border-radius: 8px !important;
            background: rgba(255, 255, 255, 0.1) !important;
        }

        .top-function-button.contact-style:hover {
            color: #374151 !important;
            opacity: 1 !important;
            border: 2px solid #64748b !important;
            background: rgba(255, 255, 255, 0.2) !important;
            transform: translateY(-2px) !important;
            box-shadow: 0 4px 12px rgba(100, 116, 139, 0.2) !important;
        }

        /* 提交按钮 - 蓝色文字 */
        .top-function-button.submit-style {
            color: #3b82f6 !important;
            border: 2px solid transparent !important;
            border-radius: 8px !important;
            background: rgba(255, 255, 255, 0.1) !important;
        }

        .top-function-button.submit-style:hover {
            color: #2563eb !important;
            opacity: 1 !important;
            border: 2px solid #3b82f6 !important;
            background: rgba(255, 255, 255, 0.2) !important;
            transform: translateY(-2px) !important;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2) !important;
        }

        /* 按钮激活状态 */
        .top-function-button:active {
            transform: scale(0.95) !important;
            transition: all 0.1s ease !important;
        }

        /* 侧边栏整体背景色和宽度调整 */
        .sidebar-menu,
        .sidebar-menu.toggle-others,
        .sidebar-menu.fixed,
        .page-container .sidebar-menu,
        body .sidebar-menu {
            background: #f3f3f3 !important;
            background-color: #f3f3f3 !important;
            background-image: none !important;
            width: 260px !important;
            /* 调整侧边栏宽度，往右移动 */
        }

        .sidebar-menu-inner,
        .sidebar-menu .sidebar-menu-inner {
            background: #f3f3f3 !important;
            background-color: #f3f3f3 !important;
            background-image: none !important;
        }

        /* 主内容区域左边距调整 */
        .main-content {
            margin-left: 270px !important;
            /* 对应侧边栏宽度，往右移动 */
        }

        /* 强制覆盖所有可能的侧边栏背景样式 */
        .sidebar-menu::before,
        .sidebar-menu::after,
        .sidebar-menu-inner::before,
        .sidebar-menu-inner::after {
            display: none !important;
        }

        .sidebar-menu .simple-logo {
            background: #f3f3f3 !important;
            background-color: #f3f3f3 !important;
        }

        /* 侧边栏分类样式 - 完整圆角矩形，四周留空白一致 */
        .sidebar-menu .menu-content1,
        .sidebar-menu-inner .menu-content1,
        body .sidebar-menu .menu-content1 {
            background: rgba(255, 255, 255, 0.95) !important;
            backdrop-filter: blur(10px) !important;
            -webkit-backdrop-filter: blur(10px) !important;
            border: 1px solid rgba(255, 255, 255, 0.3) !important;
            border-radius: 20px !important;
            padding: 10px 18px 10px 8px !important;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1) !important;
            position: fixed !important;
            top: 85px !important;
            left: 35px !important;
            bottom: 20px !important;
            width: calc(260px - 30px) !important;
            height: calc(100vh - 105px) !important;
            max-height: calc(100vh - 105px) !important;
            overflow-y: auto !important;
        }

        /* 强制在侧边栏底部添加空白 */
        .sidebar-menu::after {
            content: "" !important;
            display: block !important;
            height: 40px !important;
            width: 100% !important;
            position: fixed !important;
            bottom: 0 !important;
            left: 0 !important;
            background: transparent !important;
            pointer-events: none !important;
        }

        /* 侧边栏滚动条样式和滚动隔离 */
        .sidebar-menu .menu-content1 {
            overscroll-behavior: contain !important;
            overscroll-behavior-y: contain !important;
            overscroll-behavior-x: none !important;
            scroll-behavior: smooth !important;
            touch-action: pan-y !important;
        }

        .sidebar-menu .menu-content1::-webkit-scrollbar {
            width: 5px !important;
        }

        .sidebar-menu .menu-content1::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.03) !important;
            border-radius: 3px !important;
        }

        .sidebar-menu .menu-content1::-webkit-scrollbar-thumb {
            background: rgba(59, 130, 246, 0.25) !important;
            border-radius: 3px !important;
        }

        .sidebar-menu .menu-content1::-webkit-scrollbar-thumb:hover {
            background: rgba(59, 130, 246, 0.4) !important;
        }

        /* 确保侧边栏整体滚动隔离 */
        .sidebar-menu,
        .sidebar-menu-inner {
            overscroll-behavior: contain !important;
            overscroll-behavior-y: contain !important;
            overscroll-behavior-x: none !important;
            touch-action: pan-y !important;
        }

        /* 主内容区域滚动隔离 */
        .main-content {
            overscroll-behavior: auto !important;
            overscroll-behavior-y: auto !important;
            overscroll-behavior-x: none !important;
        }

        .sidebar-menu .main-menu {
            padding: 0 !important;
            margin: 0 !important;
        }

        .sidebar-menu .main-menu li {
            margin-bottom: 2px !important;
        }

        .sidebar-menu .main-menu li a {
            background: transparent !important;
            border: none !important;
            border-radius: 12px !important;
            margin: 0 2px !important;
            padding: 12px 16px !important;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94) !important;
            display: block !important;
            color: #333 !important;
            font-weight: 500 !important;
            font-size: 15px !important;
            line-height: 1.4 !important;
            position: relative !important;
            overflow: hidden !important;
            transform-origin: left center !important;
        }

        .sidebar-menu .main-menu li a::before {
            content: '' !important;
            position: absolute !important;
            top: 0 !important;
            left: 0 !important;
            width: 0 !important;
            height: 100% !important;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(59, 130, 246, 0.08)) !important;
            transition: width 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94) !important;
            border-radius: 12px !important;
            z-index: -1 !important;
        }

        .sidebar-menu .main-menu li a::after {
            content: '' !important;
            position: absolute !important;
            top: 50% !important;
            left: -10px !important;
            width: 4px !important;
            height: 0 !important;
            background: #3b82f6 !important;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) !important;
            border-radius: 2px !important;
            transform: translateY(-50%) !important;
        }

        .sidebar-menu .main-menu li a:hover::before {
            width: 100% !important;
        }

        .sidebar-menu .main-menu li a:hover::after {
            height: 60% !important;
            left: 4px !important;
        }

        .sidebar-menu .main-menu li a:hover,
        .sidebar-menu .main-menu li a.active {
            color: #3b82f6 !important;
            transform: translateX(8px) !important;
            font-weight: 600 !important;
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.12) !important;
        }

        /* 激活状态的平滑过渡 */
        .sidebar-menu .main-menu li a.active {
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94) !important;
        }

        /* 激活状态的渐进显示 */
        .sidebar-menu .main-menu li a.active::before {
            width: 100% !important;
            transition: width 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) !important;
        }

        .sidebar-menu .main-menu li a.active::after {
            height: 60% !important;
            left: 4px !important;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) !important;
        }

        .sidebar-menu .main-menu li a:active {
            transform: translateX(6px) scale(0.98) !important;
            transition: all 0.1s ease !important;
        }

        .sidebar-menu .main-menu li ul {
            margin-top: 2px !important;
            padding-left: 0 !important;
        }

        .sidebar-menu .main-menu li ul li {
            margin-bottom: 1px !important;
        }

        .sidebar-menu .main-menu li ul li a {
            background: transparent !important;
            margin-left: 12px !important;
            padding: 6px 10px !important;
            font-size: 13px !important;
            color: #666 !important;
            line-height: 1.3 !important;
        }

        .sidebar-menu .main-menu li ul li a:hover {
            background: rgba(59, 130, 246, 0.05) !important;
            color: #3b82f6 !important;
        }
    </style>
    <script src="assets/js/jquery-1.11.1.min.js"></script>
    <script src="assets/js/art-template.js"></script>
    <script src="assets/js/source.js"></script>
    <script async src="https://hm.baidu.com/hm.js?193b12c1d2e86b55378df6ab2b47e6d5"></script>

</head>

<body class="page-body" style="
    position: relative;
    min-height: 100vh;
    background: transparent;
    overflow-x: hidden;
">
    <!-- Dreamy Sky Pink Glow Background -->
    <div class="dreamy-sky-bg" style="
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 0;
        background-image: 
            radial-gradient(circle at 30% 70%, rgba(173, 216, 230, 0.45), transparent 50%),
            radial-gradient(circle at 70% 30%, rgba(255, 182, 193, 0.5), transparent 50%),
            radial-gradient(circle at 20% 20%, rgba(173, 216, 230, 0.25), transparent 40%),
            radial-gradient(circle at 80% 80%, rgba(255, 182, 193, 0.3), transparent 45%);
        pointer-events: none;
        min-height: 100vh;
    "></div>
    <div class="page-container">
        <div class="sidebar-menu toggle-others fixed">
            <div class="sidebar-menu-inner">
                <!-- 简化的logo区域 -->
                <div class="simple-logo" style="
                    background: #f3f3f3 !important;
                    background-color: #f3f3f3 !important;
                    border: none !important;
                    padding: 25px 0 20px 40px !important;
                    margin: 0 !important;
                    text-align: left !important;
                ">
                    <a href="index.html" style="
                        text-decoration: none;
                        color: #333;
                        font-size: 20px;
                        font-weight: 700;
                        letter-spacing: 2px;
                        background: transparent;
                        border: none;
                        box-shadow: none;
                        display: flex;
                        align-items: center;
                        gap: 10px;
                    ">
                        <img src="assets/images/favicon1 (1).png" alt="懂导航" style="
                            width: 26px;
                            height: 26px;
                            object-fit: contain;
                        ">
                        懂导航
                    </a>
                </div>


                <div id="menu-content" class="menu-content1"></div>
                <!-- <div class="b">
				        <div style="cursor: pointer;text-decoration: none;">网站提交</div>
				        <div id="clear-cache-btn""><i class="fa-solid fa-star"></i>清理缓存</div>
				</div> -->

            </div>
        </div>




        <div class="main-content">

            <!-- 导航栏 -->

            <!-- 直达顶部 -->
            <a href="javascript:void(0);" id="back-to-top"
                style="position: fixed; bottom: 30px; right: 30px; z-index: 99;padding:10px;background-color: #fff;border-radius: 50%;">
                <img src="assets/images/top.svg" alt="跳转图标" style="width: 30px; height: 30px;">
            </a>
            <!-- 首页 -->
            <div class="main-container">
                <!-- 右上角功能按钮 - 可滚动版本 -->
                <div class="top-function-area" style="
                    position: absolute;
                    top: 20px;
                    right: 20px;
                    display: flex;
                    gap: 20px;
                    align-items: center;
                    z-index: 100;
                ">
                    <div class="top-function-button contact-style" id="contact-btn-top">
                        与我联系
                    </div>
                    <a href="https://wj.qq.com/s2/17304152/bbfb/" target="_blank" style="text-decoration: none;">
                        <div class="top-function-button submit-style">
                            网站提交
                        </div>
                    </a>
                </div>

                <div class="stats-container" style="background: transparent; padding: 60px 0 0px;">
                    <div class="stats-title"
                        style="font-size: 32px; letter-spacing: 5px; color: #333; font-weight: 600; margin-top: 40px; margin-bottom: 30px; text-align: center; line-height: 1.4; text-shadow: 0 2px 4px rgba(255, 255, 255, 0.8);">
                        打造<span style="color: #3b82f6; font-weight: 700;">自媒体</span>网站和工具发现平台</div>

                    <!-- 飞书风格公告系统 - 居中显示 -->
                    <div class="announcement-container" id="announcementContainer" style="
                        position: relative;
                        margin: 15px auto;
                        display: block;
                        text-align: center;
                        width: 100%;
                    ">
                        <div class="announcement-message" id="announcementMessage" style="
                            position: relative;
                            padding: 14px 45px 14px 18px;
                            background: rgba(59, 130, 246, 0.15);
                            border: 1px solid rgba(59, 130, 246, 0.2);
                            border-radius: 10px;
                            color: #1f2329;
                            text-align: center;
                            font-size: 14px;
                            font-weight: 400;
                            line-height: 1.6;
                            letter-spacing: 1px;
                            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.12);
                            animation: announcementSlideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                            overflow: hidden;
                            width: fit-content;
                            max-width: calc(100% - 40px);
                            margin: 0 auto;
                            display: inline-block;
                        ">
                            <!-- 飞书风格图标 -->
                            <i class="fa fa-info-circle" style="
                                margin-right: 8px; 
                                color: #3b82f6; 
                                font-size: 14px;
                                vertical-align: middle;
                            "></i>

                            <!-- 飞书风格文本 -->
                            <span class="announcement-text" style="
                                color: #1f2329;
                                vertical-align: middle;
                            ">加载中...</span>

                            <!-- 飞书风格关闭按钮 -->
                            <button class="announcement-close-btn" onclick="closeAnnouncement()" style="
                                position: absolute;
                                right: 8px;
                                top: 50%;
                                transform: translateY(-50%);
                                background: transparent;
                                border: none;
                                color: #8f959e;
                                cursor: pointer;
                                font-size: 14px;
                                width: 20px;
                                height: 20px;
                                border-radius: 4px;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                transition: all 0.2s ease;
                                z-index: 3;
                            " onmouseover="this.style.background='rgba(31, 35, 41, 0.06)'; this.style.color='#1f2329'"
                                onmouseout="this.style.background='transparent'; this.style.color='#8f959e'">×</button>
                        </div>
                    </div>

                    <!-- 现代化搜索组件 -->
                    <div class="search" style="margin-bottom: 0px;">
                        <!-- 搜索组件将通过JavaScript动态生成 -->
                    </div>
                    <script>
                        document.addEventListener('DOMContentLoaded', function () {
                            new SearchComponent();
                        });
                    </script>
                </div>
                <!-- 搜索 -->




                <!-- 列表 -->
                <div id="nav-list"></div>
                <!-- 底部 -->
                <div style="background-color: #fff;letter-spacing: 1px;padding: 10px 10px  3px 10px;border-radius: 10px;margin-top:3px;  box-shadow: 
        0 1px 2px rgba(0, 0, 0, 0.04),
        0 2px 4px rgba(0, 0, 0, 0.08);">
                    <p>© 2022 - 2025 By
                        <a style="text-decoration: none;color:#999fa7;" href="https://github.com/WebStackPage"
                            target="_blank">WebStack-Hugo</a> |
                        <a style="text-decoration: none;color:#999fa7;" href="https://github.com/danbaixi/zhanku"
                            target="_blank">zhanku</a> |
                        <a style="text-decoration: none;color:#6772e5;" href=""
                            onclick="localStorage.clear(); location.reload();">清空最近使用</a>

                    </p>
                    <p>本站内容源于互联网转载或网友投稿，仅供学习用。如有侵犯您的权益，请联系QQ：3197237971删除。</p>

                </div>


            </div>


        </div>
</body>

</html>
<!-- 目录模板 -->
<script id="menu" type="text/html">
<ul id="main-menu" class="main-menu">
{{each list l}}
<li>
    <a href="#{{l.title}}" class="smooth">
        <i class="fa fa-{{l.icon}}"></i>
        <span class="title">{{l.title}}</span>
        {{if l.label}}
        <span class="label pull-right hidden-collapsed label-{{l.label.color}}">{{l.label.title}}</span>
        {{/if}}
    </a>
    {{if l.child}}
        <ul>
            {{each l.child c}}
                <li><a href="#{{c.title}}" class="smooth">
                    <span class="title">{{c.title}}</span>
                    {{if c.label}}
                    <span class="label pull-right hidden-collapsed label-{{c.label.color}}">{{c.label.title}}</span>
                    {{/if}}
                </a></li>
            {{/each}}
        </ul>
    {{/if}}
</li>
{{/each}}
</ul>
</script>
<!-- 列表模板 -->
<script id="list" type="text/html">
{{each list l}}
    {{if l.nav}}
    <div class="nav-item" id="{{l.title}}">
        <h4 class="text-gray">{{l.title}} 
            <span class="nav-count">{{ l.nav | getNavLength l.title}}</span>
        </h4>
        <div class="row">
            {{each l.nav n}}
            <div class="col-sm-3 col-lg-2 " >
                <div class="xe-widget xe-conversations box2 label-info site-box" data-toggle="tooltip" data-placement="bottom" title="{{n.desc}}" data-url="{{n.url}}">
                    <div class="xe-comment-entry ">
                        <a class="xe-user-img" >
                            {{if n.image}}
                            <img data-src="{{n.image}}" class="lozad" loading="lazy" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';" alt="{{n.title}}">
                            <span style="display:none; background:{{n.title | randomColor}}" aria-label="{{n.title}}">{{n.title | titleFirstWord}}</span>
                            {{else}}
                            <span style="background:{{n.title | randomColor}}" aria-label="{{n.title}}">{{n.title | titleFirstWord}}</span>
                            {{/if}}
                        </a>
                        <div class="xe-comment"> 
                            <p class="title xe-user-name overflowClip_1" >{{n.title}}</p>
                            <p class="desc overflowClip_2">{{n.desc}}</p>
                        </div>
                    </div>
                </div>
            </div>
            {{/each}}
        </div>  
    </div>
    {{/if}}

    {{if l.child}}
        {{each l.child c}}
        <div class="nav-item" id="{{c.title}}">
            <h4 class="text-gray">
                {{c.title}} 
                <span class="nav-count">{{c.nav | getNavLength c.title }}</span>
            </h4>
            <div class="row">
                {{each c.nav n}}
                <div class="col-sm-3 col-lg-2 ">
                    <div class="xe-widget xe-conversations box2 label-info site-box" data-toggle="tooltip" data-placement="bottom" title="{{n.desc}}" data-url="{{n.url}}">
                        <div class="xe-comment-entry">
                            <a class="xe-user-img">
                                {{if n.image}}
                                <img data-src="{{n.image}}" class="lozad" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                                <span style="display:none; background:{{n.title | randomColor}}">{{n.title | titleFirstWord}}</span>
                                {{else}}
                                <span style="background:{{n.title | randomColor}}">{{n.title | titleFirstWord}}</span>
                                {{/if}}
                            </a>
                            <div class="xe-comment">
                                <p class="title xe-user-name overflowClip_1">{{n.title}}</p>
                                <p class="desc overflowClip_2">{{n.desc}}</p>
                            </div>
                        </div>
                    </div>
                </div>
                {{/each}}
            </div>
        </div>
        {{/each}}
    {{/if}}
{{/each}}
</script>

<script type="text/javascript">
    // 更新最近使用网站数量
    function updateRecentSitesCount() {
        var history = localStorage.getItem(storageName);
        var count = history ? JSON.parse(history).length : 0;
        document.getElementById('recent-sites').textContent = count;
    }
    // 缓存名称
    var storageName = 'zk_history'

    $(document).ready(function () {
        refreshStorage()
        render()
        // 更新最近使用网站数量
        updateRecentSitesCount()
        // 初始化所有tooltip
        $('[data-toggle="tooltip"]').tooltip({
            container: 'body',
            animation: true
        });
        // 旧的搜索监听已移除，使用新的搜索组件
        // 图片懒加载已移至imagePreloader.js统一管理

        // 侧边栏滚动事件隔离
        $('.menu-content1').on('wheel', function (e) {
            e.stopPropagation();
            var $this = $(this);
            var scrollTop = $this.scrollTop();
            var scrollHeight = $this.get(0).scrollHeight;
            var height = $this.height();
            var delta = e.originalEvent.deltaY;

            // 防止滚动到边界时影响页面滚动
            if ((delta < 0 && scrollTop === 0) || (delta > 0 && scrollTop >= scrollHeight - height)) {
                e.preventDefault();
            }
        });

        // 侧边栏触摸滚动事件隔离
        $('.menu-content1').on('touchmove', function (e) {
            e.stopPropagation();
        });

        $(document).on('click', '.has-sub', function () {
            var _this = $(this)
            if (!$(this).hasClass('expanded')) {
                setTimeout(function () {
                    _this.find('ul').attr("style", "")
                }, 300);

            } else {
                $('.has-sub ul').each(function (id, ele) {
                    var _that = $(this)
                    if (_this.find('ul')[0] != ele) {
                        setTimeout(function () {
                            _that.attr("style", "")
                        }, 300);
                    }
                })
            }
        })

        $("#main-menu li ul li").click(function () {
            $(this).siblings('li').removeClass('active'); // 删除其他兄弟元素的样式
            $(this).addClass('active'); // 添加当前元素的样式
        });
        return false;
    });

    var href = "";
    var pos = 0;
    $("a.smooth").click(function (e) {
        $("#main-menu li").each(function () {
            $(this).removeClass("active");
        });
        $(this).parent("li").addClass("active");
        e.preventDefault();
        href = $(this).attr("href");
        pos = $(href).position().top - 30;
    });

    var navTotal = 0 //网站总数
    // 模板渲染
    function render() {
        //注册过滤器，获取标题首个字符，没有logo则显示
        template.defaults.imports.titleFirstWord = function (title) {
            return title.substr(0, 1)
        }
        //注册过滤器，根据标题获取背景颜色
        template.defaults.imports.randomColor = (function () {
            var colors = ['#084177', '#2b580c', '#1eb2a6', '#721b65', '#f8615a', '#a8d3da', '#a8e6cf', '#4f3961', '#f1935c']
            var colorCache = new Map()
            return function (title) {
                if (colorCache.has(title)) {
                    return colorCache.get(title)
                }
                var color = colors[title.length % colors.length]
                colorCache.set(title, color)
                return color
            }
        })()
        //注册过滤器，获取分类下网站个数
        template.defaults.imports.getNavLength = function (nav, title) {
            if (title != "最近使用") {
                navTotal += nav.length
            }
            return nav.length
        }
        var data = navData
        // 使用DocumentFragment优化DOM操作
        var fragment = document.createDocumentFragment()
        var menuContent = document.getElementById('menu-content')
        var navList = document.getElementById('nav-list')

        var category = template('menu', data)
        var list = template('list', data)

        // 批量更新DOM
        requestAnimationFrame(function () {
            menuContent.innerHTML = category
            navList.innerHTML = list
            $(".nav-total").html(navTotal)

            // 智能加载策略：根据网站数量决定加载方式
            if (navTotal <= 200) {
                // 网站数量少于等于200个，直接加载所有图片，不使用懒加载
                $('img[data-src]').each(function () {
                    var $img = $(this);
                    var src = $img.data('src');
                    if (src) {
                        $img.attr('src', src);
                        $img.removeAttr('data-src');
                        $img.removeClass('lozad');
                        $img.addClass('fade-in');
                    }
                });
                console.log('网站数量 ≤ 200，已直接加载所有图标');
            } else {
                // 网站数量超过200个，使用优化的图片预加载系统
                if (window.initializeImagePreloader) {
                    window.initializeImagePreloader();
                }
                console.log('网站数量 > 200，使用优化的图片预加载系统');
            }

            // 初始化现代化搜索组件
            if (window.SearchComponent) {
                window.modernSearch = new window.SearchComponent();
            }
        })
    }

    // 旧的搜索函数已移除，使用新的搜索组件

    //刷新最近访问历史
    function refreshStorage() {
        var history = localStorage.getItem(storageName)
        if (!history) {
            return
        }
        history = JSON.parse(history)
        // 确保每个历史记录都有image属性
        history = history.map(function (item) {
            if (!item.image) {
                item.image = 'https://favicon.im/' + new URL(item.url).hostname;
            }
            return item;
        });
        navData.list[0].nav = history
    }

    //重新渲染历史访问
    function reloadHistory() {
        refreshStorage()
        $("#最近使用").remove()
        var data = { list: [] }
        data.list.push(navData.list[0])
        var list = template('list', data)
        $("#nav-list").prepend(list)
        updateRecentSitesCount() // 更新最近使用数量
        // 使用统一的图片预加载系统
        if (window.initializeImagePreloader) {
            window.initializeImagePreloader();
        }
    }

    //历史记录 入栈
    function pushHistory(data, deleteData) {
        var history = localStorage.getItem(storageName)
        var deleteData = deleteData || ''
        history = JSON.parse(history)
        if (!history) {
            history = []
            history.push(data)
        } else {
            for (var i = history.length - 1; i >= 0; i--) {
                if (history[i].url == deleteData) {
                    history.splice(i, 1)
                    continue
                }
                history[i + 1] = history[i]
            }
            history[0] = data
        }
        localStorage.setItem(storageName, JSON.stringify(history))
    }

    //访问链接
    $(document).on("click", ".site-box", function (e) {
        var url = $(this).data("url")
        window.open(url)

        // 检查是否是最近使用分类下的网站
        var isRecentSite = $(this).closest('#最近使用').length > 0;

        var history = localStorage.getItem(storageName)
        history = JSON.parse(history)
        var inList = false
        if (history) {
            for (var i = 0; i < history.length; i++) {
                if (url == history[i].url) {
                    //将位置放到首个
                    pushHistory(history[i], history[i].url)
                    inList = true
                    break;
                }
            }
        }
        if (!inList) {
            //不在历史列表中
            var title = $(this).find(".title").html()
            var desc = $(this).find(".desc").html()
            var image = 'https://favicon.im/' + new URL(url).hostname;
            if ($(this).find(".xe-user-img img").length > 0) {
                //有logo
                image = $($(this).find(".xe-user-img img")[0]).data('src')
            }
            var data = {
                title: title,
                url: url,
                desc: desc,
                image: image
            }
            pushHistory(data)
        }

        // 不刷新界面，只更新localStorage和数量显示
        updateRecentSitesCount()
    })

</script>
<script src="assets/js/announcement-system.js" defer></script>
<script src="assets/js/hero-functions.js" defer></script>
<script src="assets/js/nav-active.js" defer></script>
<script src="assets/js/bootstrap.min.js" defer></script>
<script src="assets/js/TweenMax.min.js" defer></script>
<script src="assets/js/resizeable.js" defer></script>
<script src="assets/js/xenon-toggles.js" defer></script>
<script src="assets/js/xenon-custom.js" defer></script>
<script src="assets/js/lozad.js" defer></script>
<script src="assets/js/imagePreloader.js" defer></script>
<script src="assets/js/search-component.js" defer></script>
<script src="assets/js/scroll-sync.js" defer></script>

<!-- 联系弹出框 -->
<div class="contact-modal" id="contactModal">
    <div class="contact-modal-content">
        <span class="contact-close" id="closeModal">&times;</span>
        <h3 class="contact-title">联系方式</h3>
        <div class="contact-info" id="contactInfo">ajin-2024</div>
        <button class="copy-button" id="copyButton">一键复制</button>
        <div class="copy-success" id="copySuccess">复制成功！</div>
        <div class="contact-note">添加时请备注来意</div>
    </div>
</div>

<script>
    // 右上角联系按钮事件
    document.getElementById('contact-btn-top').addEventListener('click', function () {
        document.getElementById('contactModal').style.display = 'flex';
    });

    document.getElementById('closeModal').addEventListener('click', function () {
        document.getElementById('contactModal').style.display = 'none';
    });

    document.getElementById('copyButton').addEventListener('click', function () {
        var contactInfo = document.getElementById('contactInfo').innerText;
        navigator.clipboard.writeText(contactInfo).then(function () {
            var copySuccess = document.getElementById('copySuccess');
            copySuccess.style.display = 'block';
            setTimeout(function () {
                copySuccess.style.display = 'none';
            }, 2000);
        });
    });

    window.onclick = function (event) {
        var modal = document.getElementById('contactModal');
        if (event.target == modal) {
            modal.style.display = 'none';
        }
    };

    // 全局关闭公告函数
    function closeAnnouncement() {
        if (window.announcementSystem) {
            window.announcementSystem.closeAnnouncement();
        }
    }
</script>